<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Asignación de Prioridad - HospitalSys</title>
  <link rel="stylesheet" href="styles(1).css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    .form-container {
      max-width: 500px;
      margin: 20px auto;
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
    }
    .form-container label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    .form-container input, .form-container select, .form-container button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .priority-result {
      margin-top: 15px;
      padding: 10px;
      border-radius: 5px;
      font-weight: bold;
    }
    .alta { background-color: #f8d7da; color: #721c24; }
    .media { background-color: #fff3cd; color: #856404; }
    .baja { background-color: #d4edda; color: #155724; }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="../index.html">
      <img src="img/ChatGPT Image 9 ago 2025, 12_03_46 p.m.-Photoroom.png" alt="Logo"
        style="height: 100px; width: 100px; cursor: pointer; margin-left: 300px;">
    </a>
    <ul class="nav-links">
      <li><a href="index.html">Inicio</a></li>
      <li><a href="login/login.html">Inicio de Sesión</a></li>
      <li><a href="gestion-citas.html">Gestión de Citas</a></li>
      <li><a href="disponibilidad.html">Disponibilidad Médica</a></li>
      <li><a href="asignacion-horarios.html">Asignación de Horarios</a></li>
      <li><a href="panel-administrativo.html">Panel Administrativo</a></li>
      <li><a href="notificaciones.html">Notificaciones</a></li>
      <li><a href="soporte.html">Soporte</a></li>
    </ul>
  </nav>

  <main class="section">
    <h1><i class="fas fa-triangle-exclamation"></i> Asignación Automática de Prioridad</h1>

    <div class="form-container">
      <form method="POST" action="guardar_prioridad.php" onsubmit="return asignarPrioridad()">
        <label>ID de Cita</label>
        <input type="number" name="id_cita" required>

        <label>Edad del Paciente</label>
        <input type="number" id="edad" required>

        <label>Enfermedad</label>
        <select id="enfermedad">
          <option value="ninguna">Ninguna</option>
          <option value="cronica">Crónica</option>
          <option value="grave">Grave</option>
        </select>

        <label>Situación Socioeconómica</label>
        <select id="situacion">
          <option value="normal">Normal</option>
          <option value="vulnerable">Vulnerable</option>
        </select>

        <input type="hidden" name="prioridad" id="prioridad">

        <div id="resultado" class="priority-result"></div>

        <button type="submit">Guardar Prioridad</button>
      </form>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 HospitalSys – Proyecto académico</p>
  </footer>

  <script>
    function asignarPrioridad() {
      let edad = parseInt(document.getElementById("edad").value);
      let enfermedad = document.getElementById("enfermedad").value;
      let situacion = document.getElementById("situacion").value;
      let prioridad = "Baja";
      let resultado = document.getElementById("resultado");

      if (edad > 65 || enfermedad === "grave" || situacion === "vulnerable") {
        prioridad = "Alta";
        resultado.className = "priority-result alta";
        resultado.innerText = "Prioridad Alta asignada automáticamente.";
      } else if (edad >= 45 || enfermedad === "cronica") {
        prioridad = "Media";
        resultado.className = "priority-result media";
        resultado.innerText = "Prioridad Media asignada automáticamente.";
      } else {
        prioridad = "Baja";
        resultado.className = "priority-result baja";
        resultado.innerText = "Prioridad Baja asignada automáticamente.";
      }

      document.getElementById("prioridad").value = prioridad;
      return true;
    }
  </script>
</body>
</html>